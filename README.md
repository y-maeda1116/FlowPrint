# FlowPrint - 流紋 -

*墨染めの流れ、時を刻む。あなたの日常に、静寂なる調和を。*

---

## 概要

FlowPrint -流紋- は、日々のタスクや時間の流れを、レシートプリンターから打ち出される記録として具現化する試みです。
その着想は、[Laurie Herault氏の記事「A thermal receipt printer cured my procrastination」](https://www.laurieherault.com/articles/a-thermal-receipt-printer-cured-my-procrastination)にあります。

私たちは、このアイデアに和の精神を融合させ、まるで墨が和紙に染み渡るように、一つ一つの行動が静かに、しかし確かに刻まれる体験を目指しています。

---

## 特徴

*   **静謐な記録:** あなたの行動を、和紙に刻むように静かに記録します。
*   **カスタマイズ性:** (将来的に実装予定) 印字する内容やタイミングを調整可能です。
*   **ミニマルな存在感:** 日常の邪魔にならない、慎ましやかな佇まい。

---

## FlowPrint: 実用ガイド

このセクションでは、FlowPrintアプリケーションの具体的な機能、セットアップ方法、および使用方法について説明します。

### プロジェクト概要

FlowPrintは、ADHDを持つ方々の生産性向上を支援するために設計された、階層型タスク管理アプリケーションです。ゲームのフィードバックループ理論と物理的な記録（レシート印刷）を組み合わせることで、タスク管理をより直感的かつ満足感のあるものにすることを目指しています。

### 主要機能

*   **マルチカラム式階層表示**:
    *   タスクをクリックすると、そのサブタスクが右隣のカラムに展開されます。
    *   無制限の階層深度でタスクを管理できます。
*   **高速キーボード操作**:
    *   主要な操作はキーボードショートカットで行えます (詳細は後述)。
*   **インライン編集**: タスク名をその場で直接編集できます。
*   **タスクのCRUD操作**: タスクの作成、読み取り、更新、削除が可能です。
*   **ローカルストレージ永続化**: タスクデータはブラウザのローカルストレージに保存され、リロード後も保持されます。
*   **レシートプリンター連携 (WebUSB)**:
    *   対応するレシートプリンター (Epson TMシリーズなど) を接続し、選択したカラムのタスクリストを印刷できます。
    *   ESC/POSコマンドを使用。
*   **スマートタスク分解 (基本機能)**:
    *   **時間ベース分割**: タスクを特定の時間単位で複数のサブタスクに自動分割。
    *   **テンプレート適用**: 事前に定義したタスクセット（テンプレート）からタスク群を生成。
*   **統計・分析表示**:
    *   完了タスク数 (総数、今日、今週、今月) を表示するサイドパネル。
*   **データのエクスポート/インポート**:
    *   タスクデータをJSON形式でエクスポート (バックアップ)。
    *   JSONファイルからデータをインポート (復元)。

### 技術スタック

*   フロントエンド: React, TypeScript, Vite
*   状態管理: Zustand
*   UI: Tailwind CSS, Headless UI
*   キーボード操作: react-hotkeys-hook
*   プリンター連携: WebUSB API (ブラウザ標準)
*   テスト: Vitest

### セットアップと実行方法

#### 前提条件

*   Node.js (バージョン 18.x 以上推奨)
*   npm (Node.jsに付属) または yarn

#### インストール

1.  リポジトリをクローンします:
    ```bash
    git clone https://github.com/y-maeda1116/FlowPrint.git
    cd FlowPrint
    ```
2.  依存関係をインストールします:
    ```bash
    npm install
    # または
    # yarn install
    ```

#### 開発サーバーの起動

以下のコマンドで開発サーバーを起動します:
```bash
npm run dev
# または
# yarn dev
```
通常、`http://localhost:5173` (または別のポート) でアプリケーションが開きます。

#### ビルド

プロダクション用にビルドする場合:
```bash
npm run build
# または
# yarn build
```
ビルドされたファイルは `dist` ディレクトリに出力されます。

### 使用方法

#### 基本操作

*   **カラムの操作**:
    *   タスクをクリックすると、そのタスクの子タスクが右隣のカラムに表示されます。
    *   カラムヘッダーには親タスク名（ルートの場合は「ルートタスク」）と階層レベルが表示されます。
*   **タスクの作成**:
    *   各カラムの下部にある「+ 新規タスク追加」ボタンをクリックすると、タスク作成モーダルが開きます。
    *   タイトル、説明、予定時間、優先度などを入力してタスクを作成できます。
    *   モーダルでは、時間ベース分割やテンプレートからの作成も選択できます。
*   **タスクの編集**:
    *   タスク名をクリックするとインラインで編集できます。
    *   各タスクの「詳細」ボタンをクリックすると、タスク編集モーダルが開きます。
*   **タスクの完了**:
    *   タスク名の左側にあるチェックボックスで完了/未完了を切り替えます。
*   **タスクの削除**:
    *   各タスクの「削除」ボタンでタスクを削除します。

#### キーボードショートカット

*   **Space**: 選択中のタスクの完了/未完了を切り替え。
*   **Delete**: 選択中のタスクを削除 (確認あり)。
*   **F2**: 選択中のタスク名をインライン編集モードにする。
*   **Enter**: (タスク編集中でない場合) 選択中タスクの兄弟として新規タスク作成モーダルを開く (選択がなければルートタスクとして)。
*   **Ctrl+Enter** (または **Cmd+Enter**): (タスク編集中でない場合) 選択中のタスクの子として新規タスク作成モーダルを開く。

#### プリンター連携

1.  **接続**:
    *   画面下部の「プリンター設定」エリアにある「プリンター接続」ボタンをクリックします。
    *   ブラウザの指示に従い、接続するUSBレシートプリンターを選択します (Epson TMシリーズなど、ESC/POS対応機種)。
2.  **印刷**:
    *   プリンター接続後、「テスト印刷」ボタンで接続確認ができます。
    *   カラム内のタスクをクリックしてカラムを選択状態にすると、「選択中カラム印刷」ボタンがアクティブになり、そのカラムのタスクリストを印刷できます。
    *   印刷フォーマット:
        ```
        [日付] [時刻]
        --------------------
        [ ] タスク1
        [x] タスク2 (完了)
        --------------------
        総計: Xタスク
        ```

#### データ管理

画面下部の「データ管理」エリアで以下の操作が可能です。

*   **JSONエクスポート**: 現在の全タスクデータ、テンプレートをJSONファイルとしてダウンロードします。バックアップ用途に利用できます。
*   **JSONインポート**: エクスポートしたJSONファイルを読み込み、データを復元します。インポートすると現在のデータは上書きされます。

### 今後の展望 (主なもの)

*   CSV形式でのデータエクスポート。
*   より高度なタスク分解提案機能 (AI活用など)。
*   先延ばし検知とリマインダー機能。
*   アクセシビリティの向上 (WCAG準拠テストと改善)。
*   E2Eテストおよびパフォーマンステストの拡充。
*   Electron版によるクロスプラットフォーム対応と高度なプリンター制御。
*   モバイル対応（レスポンシブデザインの改善、PWA機能強化）。
*   チーム機能（タスク共有、共同編集など）。
